<div class="container mt-4 pb-4">

  <!-- Navigation -->
  <div class="text-center m-4">
    <button [routerLink]="'/sel'" class="btn btn-primary mx-2 btn-custom">Zurück</button>
    <button [routerLink]="'/profile'" class="btn btn-primary mx-2 btn-custom" >
      Zum Profil
    </button>
  </div>
  <!-- Navigation Ende -->

  <div class="row border rounded background-editProduct">
    <div class="col-lg-10 col-md-8 mx-auto">
      <div class="row align-items-center md-5 mt-md-3 mb-5">
        <div class="col-12">
          <div class="text-white">
            <div class="card-title text-center mt-3">
              <h3>Produkt bearbeiten</h3>
            </div>

            <!-- Form für Produkteingaben/änderungen -->
            <form
              name="form"
              (ngSubmit)="f.form.valid && onSubmit()"
              #f="ngForm"
              novalidate
            >
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6">

                    <!-- Produktname -->
                    <div class="form-group">
                      <label for="productname"
                        >Produktname: <span class="text-danger">*</span></label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="productname"
                        name="productname"
                        [(ngModel)]="product.productname"
                        #productname="ngModel"
                        required
                      />
                      <div
                        class="validation text-danger small"
                        *ngIf="f.submitted && productname.invalid"
                      >
                        Produktname darf nicht leer sein
                      </div>
                    </div>

                    <!-- Produktbeschreibung -->
                    <div class="form-group">
                      <label for="productdescription"
                        >Produktbeschreibung:
                        <span class="text-danger">*</span></label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="productdescription"
                        name="productdescription"
                        [(ngModel)]="product.productdescription"
                        #productdescription="ngModel"
                        required
                      />
                      <div
                        class="validation text-danger small"
                        *ngIf="f.submitted && productdescription.invalid"
                      >
                        Produktbeschreibung darf nicht leer sein
                      </div>
                    </div>

                    <!-- Produktkategorie -->
                    <div class="form-group">
                      <label for="productcategorie"
                        >Produktkategorie:<span class="text-danger"
                          >*</span
                        ></label
                      >
                      <div class="input-group">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <i class="bi bi-chevron-down"></i>
                          </span>
                        </div>
                        <select
                          class="form-control"
                          id="productcategorie"
                          name="productcategorie"
                          [(ngModel)]="product.productcategorie"
                          #productcategorie="ngModel"
                          required
                        >
                          <option value="" disabled selected>
                            Bitte wählen
                          </option>
                          <option value="Makita">Makita</option>
                          <option value="DeWalt">DeWalt</option>
                          <option value="Hilti">Hilti</option>
                          <option value="Bosch">Bosch</option>
                          <option value="Milwaukee">Milwaukee</option>
                          <option value="Einhell">Einhell</option>
                          <option value="Festool">Festool</option>
                        </select>
                      </div>
                      <div
                        class="validation text-danger small"
                        *ngIf="f.submitted && productcategorie.invalid"
                      >
                        Produktkategorie darf nicht leer sein
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">

                    <!-- Produktid -->
                    <div class="form-group">
                      <label for="productid"
                        >Product Id: <span class="text-danger">*</span></label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="productid"
                        name="productid"
                        [(ngModel)]="product.productid"
                        #productid="ngModel"
                        required
                      />
                      <div
                        class="validation text-danger small"
                        *ngIf="f.submitted && productid.invalid"
                      >
                        Produkt ID darf nicht leer sein
                      </div>
                    </div>

                    <!-- Produktpreis -->
                    <div class="form-group">
                      <label for="productprice"
                        >Produkt Preis:
                        <span class="text-danger">*</span></label
                      >
                      <input
                        type="number"
                        class="form-control"
                        id="productprice"
                        name="productprice"
                        pattern="[0-9]+(\.[0-9]+)?"
                        [(ngModel)]="product.productprice"
                        #productprice="ngModel"
                        min="0"
                        required
                      />
                      <div
                        class="validation text-danger small"
                        *ngIf="f.submitted && productprice.invalid"
                      >
                        Produktpreis darf nicht leer sein
                      </div>
                    </div>

                    <!-- Produktmenge -->
                    <div class="form-group">
                      <label for="productamount"
                        >Produkt Menge:
                        <span class="text-danger">*</span></label
                      >
                      <input
                        type="number"
                        class="form-control"
                        id="productamount"
                        name="productamount"
                        min="0"
                        step="1"
                        [(ngModel)]="product.productamount"
                        #productamount="ngModel"
                        required
                      />
                      <div
                        class="validation text-danger small"
                        *ngIf="f.submitted && productamount.invalid"
                      >
                        Produkt Menge darf nicht leer sein
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Porduktbild -->
                <div class="form-group">
                    <label for="productimage"
                        >Produkt Bilder:
                        <span class="text-danger">*</span></label
                      >
                    <div class="custom-file">
                      <input
                        type="file"
                        class="custom-file-input"
                        id="productimage"
                        accept="image/*"
                        (change)="addSelectedImage($event)"
                      />
                      <label class="custom-file-label" for="productimage"
                        >Bild aussuchen...</label
                      >
                    </div>
                    <div
                      class="validation text-danger small"
                      *ngIf="f.submitted && product.images.length == 0"
                    >
                      Sie müssen ein Bild auswählen
                    </div>
                  </div>

                <!-- Anzeige der Produktbilder -->
                <div class="row">
                  <div
                    class="col-md-3"
                    *ngFor="let image of product.images; let i = index"
                  >
                    <div class="card m-2 h-100">
                      <img
                        [src]="image"
                        class="card-img-top p-2"
                        style="object-fit: contain; height: 250px"
                        alt="Product Image"
                      />
                      <div class="card-body text-center">
                        <button class="btn btn-danger btn-custom" (click)="deleteImage(i)">
                          <i class="bi bi-trash"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Anzeige der Produktbilder Ende-->
              </div>
              <div class="container text-center mt-3">
                <button type="submit" class="btn btn-primary m-3 btn-custom">
                  Speichern
                </button>
              </div>
            </form>
            <!-- Form für Produkteingaben/änderungen Ende-->
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
